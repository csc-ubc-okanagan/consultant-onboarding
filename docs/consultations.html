<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>UBCO CSC Data Consultation Service - Consultations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">UBCO CSC Data Consultation Service</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./consultations.html" rel="" target="" aria-current="page">
 <span class="menu-text">Consultations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./scenarios-in-data-consultations.html" rel="" target="">
 <span class="menu-text">Scenarios</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./workshops.html" rel="" target="">
 <span class="menu-text">Workshops</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./blog-posts.html" rel="" target="">
 <span class="menu-text">Blog Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./referrals.html" rel="" target="">
 <span class="menu-text">Referrals</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#service-model" id="toc-service-model" class="nav-link active" data-scroll-target="#service-model">Service Model</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#objectives-outcomes" id="toc-objectives-outcomes" class="nav-link" data-scroll-target="#objectives-outcomes">Objectives &amp; Outcomes</a></li>
  <li><a href="#notes-on-scope" id="toc-notes-on-scope" class="nav-link" data-scroll-target="#notes-on-scope">Notes on Scope</a></li>
  </ul></li>
  <li><a href="#what-is-communicated-to-booking-students" id="toc-what-is-communicated-to-booking-students" class="nav-link" data-scroll-target="#what-is-communicated-to-booking-students">What is Communicated to Booking Students</a></li>
  <li><a href="#consultation-space" id="toc-consultation-space" class="nav-link" data-scroll-target="#consultation-space">Consultation Space</a></li>
  <li><a href="#consultations-academic-scholarly-integrity" id="toc-consultations-academic-scholarly-integrity" class="nav-link" data-scroll-target="#consultations-academic-scholarly-integrity">Consultations &amp; Academic / Scholarly Integrity</a>
  <ul class="collapse">
  <li><a href="#handling-substantive-contributions" id="toc-handling-substantive-contributions" class="nav-link" data-scroll-target="#handling-substantive-contributions">Handling Substantive Contributions</a></li>
  </ul></li>
  <li><a href="#booking-procedures" id="toc-booking-procedures" class="nav-link" data-scroll-target="#booking-procedures">Booking Procedures</a>
  <ul class="collapse">
  <li><a href="#consultation-bookings" id="toc-consultation-bookings" class="nav-link" data-scroll-target="#consultation-bookings">Consultation Bookings</a></li>
  </ul></li>
  <li><a href="#preparing-for-the-consultation" id="toc-preparing-for-the-consultation" class="nav-link" data-scroll-target="#preparing-for-the-consultation">Preparing for the consultation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Consultations</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="service-model" class="level2">
<h2 class="anchored" data-anchor-id="service-model">Service Model</h2>
<p>This is outlined more concisely for students at <a href="https://csc.ok.ubc.ca/consultations/research-data-consultation/">https://csc.ok.ubc.ca/consultations/research-data-consultation/</a>. This is also where students can access the booking form.</p>
<section id="overview" class="level3">
<h3 class="anchored" data-anchor-id="overview">Overview</h3>
<p>The data consultation service is premised on enhancing the graduate and undergraduate research learning experience at UBCO, providing students with an opporutnity to build new skill sets that are transferable to future problems. As such, the intent of the service is not to solve the problem for the student, but to navigate them through the problem solving process, helping them to identify a solution that they understand, can implement, and is appropriate for their discipline, their data, and their research question.</p>
<p>The service is delivered with the underlying philosophy of engaging students in transparent and reproducible methods, hence the focus on open source and scripted tools for analysis. However, this should be extended to include principles such as maintianing a read only version of the raw data, not overwriting data, and maintaining documentation in the form of readmes and data dictionaries. These, and other good research practices related to data management should be encouraged during consultations.</p>
<p>However, this can be challenging for several reasons. Students may:</p>
<ul>
<li>have limited skillsets in the use of R or Python</li>
<li>come with immediate deadlines they need to meet</li>
<li>have an expectation that someone else will do the work for them</li>
<li>be less interested in understanding the problem than simply having a solution</li>
<li>lack PI or other faculty support in adhering to best practices in data managmenet and statistical methods</li>
<li>and more…</li>
</ul>
<p>These are factors that need to be mediated and benefit from seeking clarification from the student. Ultimately, it is not up to a consultant to tell a student how their work should be done, nor is it their responsibility to navigate the relationship between a student and their supervisor or other project lead. However, it is critical to be clear on the scope of services available. If at any stage there is concern about conflict in managing these challenges, the consultant should bring the issue directly to their supervisor to support a resolution.</p>
</section>
<section id="objectives-outcomes" class="level3">
<h3 class="anchored" data-anchor-id="objectives-outcomes">Objectives &amp; Outcomes</h3>
<p><strong>Objectives of the Service</strong></p>
<ul>
<li>Provide guidance on the writing of code to clean, organize, and otherwise prepare data for analysis.</li>
<li>Provide guidance on interpreting errors and identifying solutions to overcome these.</li>
<li>Provide guidance on the selection, application, and interpretation of statistical models used in analysis.</li>
</ul>
<p><strong>Outcomes of the Service</strong></p>
<ul>
<li>Users will be able to write clearer, more reliable code</li>
<li>Users will be able to interpret the error messages they receive and resolve them.</li>
<li>Users will gain insights into the appropriate selection, application, and interpretation of statistical methods and models</li>
</ul>
<p><strong>Example Activities Supporting these Outcomes and Objectives</strong></p>
<ul>
<li>Assist in drafting code to address an error</li>
<li>Provide sample code to move a dataset through the data analysis pipeline (cleaning, organizing, imputing, etc) (this may be substantive)</li>
<li>Describe the applicability and interpretation of a statistical model</li>
<li>Advise on the selection of a statistical model, ideally before data collection</li>
<li>Draft code to demonstrate the implementation a specific model (this may be substantive)</li>
<li>As possible, draft all code on a random sample of the supplied data</li>
</ul>
</section>
<section id="notes-on-scope" class="level3">
<h3 class="anchored" data-anchor-id="notes-on-scope">Notes on Scope</h3>
<p><strong>Out of Scope</strong></p>
<ul>
<li>Writing the full analysis pipeline</li>
<li>Class assignment support</li>
</ul>
</section>
</section>
<section id="what-is-communicated-to-booking-students" class="level2">
<h2 class="anchored" data-anchor-id="what-is-communicated-to-booking-students">What is Communicated to Booking Students</h2>
<p>When booking a consultation, students are asked to provide certain key pieces of information to assist you in helping them and to sign off on a number of things that relate to academic and scholarly integrity.</p>
<p>This booking form is managed in LibCal, and once your account is set up, can be accessed by navigating to Appointments &gt; Booking Forms. You should familiarize yourself with this form. If you find that the form is not sufficiently capturing what is needed to facilitate your consultations, you are encouraged to suggest updates.</p>
<p>Students are also provided with two additional links, one for <a href="https://csc.ok.ubc.ca/wp-content/uploads/sites/150/2024/08/RD_Consultation_Guide_20250516_Rev0.pdf">What to Expect During Your Research Data Consultation</a>, and for <a href="https://csc.ok.ubc.ca/wp-content/uploads/sites/150/2024/08/RD_Consultation_Guide_20250516_Rev0.pdf#page=2">What Should I Bring to a Consultation?</a>. You should familiarize yourself with these two documents. They can also be referenced to help set expectations for a consultation. As above, you are encouraged to suggest edits and updates.</p>
</section>
<section id="consultation-space" class="level2">
<h2 class="anchored" data-anchor-id="consultation-space">Consultation Space</h2>
<p>Consultations may be provided in person or over Zoom. If you do not yet have a Zoom account through UBC, the CSC Coordinator or your supervisor can help set this up.</p>
<p>For in person consultations, we have both LIB 223 and LIB 225 available. You should have Salto access to these two rooms as well as access to the calendars. If you have neither of these, the CSC Coordinator or your supervisor can help set this up.</p>
</section>
<section id="consultations-academic-scholarly-integrity" class="level2">
<h2 class="anchored" data-anchor-id="consultations-academic-scholarly-integrity">Consultations &amp; Academic / Scholarly Integrity</h2>
<p>It is important to be cognizant of when help begins to infringe on academic and scholarly integrity. This is all the more difficult as different supervisors, collaborators, and disciplines have differing expectations on the scope of support that is legitimate. In some cases, it may be appropriate to write code for an analysis, so long as attribution is provided. In other cases, it may be unacceptable for the student to use code drafted by someone else. The former may be the case if the purpose of the required understanding is the conceptual approach and output; the latter if the required understanding includes a level of mastery of the language.</p>
<p>It is importnat to communicate during a consultation that the student should engage with their collaborators and supervisor on the level of support that they are getting; an effective way of doing this is to ask them to solicit feedback on a proposed solution or path forward followed by booking another consultation when things are agreed upon by the research team (possibly just the student and their supervisor).</p>
<p>Because writing and trouble shooting code can be a very hands on activity, we have the following guide to help limit the level of ‘authoring’ the data consultant engages in and how much of the original data any authoring happens on:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Activity</th>
<th style="text-align: left;">Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">trouble shoot code</td>
<td style="text-align: left;">on their machine, full data set</td>
</tr>
<tr class="even">
<td style="text-align: left;">write code</td>
<td style="text-align: left;">on their machine, using a sample</td>
</tr>
<tr class="odd">
<td style="text-align: left;">troubleshoot a model</td>
<td style="text-align: left;">on their machine, full data set</td>
</tr>
<tr class="even">
<td style="text-align: left;">write / customize a model</td>
<td style="text-align: left;">on their machine, using a sample</td>
</tr>
<tr class="odd">
<td style="text-align: left;">interpret findings</td>
<td style="text-align: left;">on their machine, full data set</td>
</tr>
</tbody>
</table>
<section id="handling-substantive-contributions" class="level3">
<h3 class="anchored" data-anchor-id="handling-substantive-contributions">Handling Substantive Contributions</h3>
<p>In spite of being aware and taking precautions, you may well end up in a situation feeling like you’re making ‘substantive’ contributions to the student’s project. In such cases you should always make your supervisor aware of the situation.</p>
<p>Examples of how these situations might be navigated include:</p>
<ul>
<li>When ‘substantive’ contributions are being made to overcome a lack of understanding on the user’s part (this is in contrast to a ‘substantive’ contribution whose primary purpose is demonstration). In these cases, the student should be referred to their supervisor for guidance and may be referred to other self-guided resources or workshops.</li>
<li>When ‘substantive’ makes you think your contributions warrant acknowledgement. In these cases, the student should be made aware of this fact.</li>
<li>When ‘substantive’ makes you think your contributions warrant co-authorship. You should be thinking about this before we get to this stage. If acknowledgment is veering toward co-authorship, this should be clarified with the student and the conversation should include other co-authors and consent from the PI. Your manager / supervisor should also be alerted. If work does veer in this direction, it as the discretion of the consultant to pursue this collaboration outside of their data consultant role.</li>
</ul>
</section>
</section>
<section id="booking-procedures" class="level2">
<h2 class="anchored" data-anchor-id="booking-procedures">Booking Procedures</h2>
<section id="consultation-bookings" class="level3">
<h3 class="anchored" data-anchor-id="consultation-bookings">Consultation Bookings</h3>
<p>We use LibCal for consultation booking. The CSC coordinator will help to get you set with a profile and review with you how LibCal works.</p>
</section>
</section>
<section id="preparing-for-the-consultation" class="level2">
<h2 class="anchored" data-anchor-id="preparing-for-the-consultation">Preparing for the consultation</h2>
<p>When booking a consultation, students will be asked if they will be bringing code and / or data to the consultation. If they answer yes, you are to create a folder for them, titled with their name, and invite them to it, asking them to deposit any materials at least 24 hours in advance of the consultation.</p>
<p>You will need to request access yourself to the <code>data-deposit/</code> directory, if you don’t already have access. You can do so by <a href="https://ubcca.sharepoint.com/:f:/r/teams/ubcOKLB-gr-CentreforScholarlyCommunication-DataConsultant/Shared%20Documents/Data%20Consultants/data-deposit?csf=1&amp;web=1&amp;e=zVgRwJ">clicking on this link</a>.</p>
<p>Consultations are booked in one hour slots. Time management is very important, and it’s important to reasonably limit the scope of what can be covered in a single consultation, encouraging students to book follow up appointments. It is also advisable, when doing time management with a consultation, to aim for 45 minutes, giving yourseld a 15 minute buffer.</p>
<p>This being said, each one hour consultation could easily take 2 hours of your time, especially if this is the first time the student is booking. It is expected that you will take some time to review any deposited code, data, and associated documentation in advance of the consultation. It is also expected that you will take some time responding post consultation via email to the student, summarizing what was covered in the session and what you’ve agreed on for next steps.</p>
<p>It is also expected that you may need to do spend some time investigating or researching novel concepts that arise during a consultation to effectively support a student. If you find yourself requiring more than an hour in such follow up research, bring this to the attention of your supervisor for discussion on how best to approach balancing what might become competing interests on having time for consultations, time for preparation and follow up, and time for skills and knowledge development.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>